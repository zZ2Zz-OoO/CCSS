<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div id="root">
    <el-form ref="form" :model="form" label-width="80px">
        <el-form-item label="简述">
            <el-input v-model="form.info"></el-input>
        </el-form-item>
        <el-form-item label="服务类型">
            <el-input v-model="form.typeId"></el-input>
        </el-form-item>
        <el-form-item label="地址">
            <el-input v-model="form.address"></el-input>
        </el-form-item>
        <el-form-item label="社区编号">
            <el-input v-model="form.communityId"></el-input>
        </el-form-item>
        <el-form-item label="联系电话">
            <el-input v-model="form.phone"></el-input>
        </el-form-item>
    </el-form>
    <el-button round @click="add">圆角按钮</el-button>

</div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="/static/js/vue.js"></script>
<!-- 引入样式 -->
<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<!-- 引入组件库 -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script>
    new Vue({
        el: '#root',
        data() {
            return {
                form: {
                    info: '',
                    typeId: '',
                    address: '',
                    phone: '',
                    communityId: '',
                    isFinished: 0,
                    // userId:JSON.parse(sessionStorage.getItem('user')).userName,
                    userId: '',
                    postDate: ''
                }
            }
        },
        created() {
            this.getUserId()
            this.getdate()
        },
        methods: {
            add() {
                console.log(this.form)
                axios({
                    method: "post",
                    url: 'http://localhost:8080/orders',
                    data: this.form
                }).then(res => {
                    if (res.data.code === 1) {
                        alert("发布成功")
                    } else {
                        alert("发布失败")
                    }
                })
            },
            getUserId() {
                this.form.userId = JSON.parse(sessionStorage.getItem('user')).userId
            },
            getdate() {
                //获取当前时间并打印
                var _this = this;
                let yy = new Date().getFullYear();
                let mm = new Date().getMonth() + 1;
                let dd = new Date().getDate();
                let hh = new Date().getHours();
                let mf = new Date().getMinutes() < 10 ? '0' + new Date().getMinutes() : new Date().getMinutes();
                let ss = new Date().getSeconds() < 10 ? '0' + new Date().getSeconds() : new Date().getSeconds();
                _this.gettime = yy + '/' + mm + '/' + dd + ' ' + hh + ':' + mf + ':' + ss;
                this.form.postDate = _this.gettime
            }
        }


    })
</script>
</body>
</html>